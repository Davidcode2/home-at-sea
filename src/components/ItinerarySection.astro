---
import type { Itinerary } from "../lib/strapi";
import Globe from "./Globe.tsx";

interface Props {
  itinerary: Itinerary;
  shipName: string;
  color?: string;
}

const { itinerary, shipName, color = "#C5A572" } = Astro.props;

const stops = (itinerary.stops || []).sort((a, b) => a.order - b.order);
const globeStops = stops.map((s) => ({
  name: s.name,
  lat: s.latitude,
  lng: s.longitude,
}));
---

<div class="grid grid-cols-1 lg:grid-cols-2 items-center overflow-hidden">
  <div class="h-[400px] lg:h-[550px] 2xl:h-[700px]">
    <Globe stops={globeStops} routeColor={color} client:only="react" />
  </div>
  <div class="relative z-10 lg:-ml-12 bg-theme-secondary rounded-2xl p-8 shadow-[0_4px_40px_rgba(0,0,0,0.12)] dark:shadow-[0_4px_40px_rgba(0,0,0,0.5)]">
    <h3 class="font-heading text-2xl font-bold text-theme-primary mb-2">{itinerary.name}</h3>
    <p class="text-theme-secondary mb-6 leading-relaxed">{itinerary.description}</p>
    <div class="flex flex-wrap gap-2">
      {stops.map((stop) => (
        <span class="inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-sm bg-accent-primary/10 text-accent-primary border border-gold/20">
          <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="4" />
          </svg>
          {stop.name}
        </span>
      ))}
    </div>
  </div>
</div>
