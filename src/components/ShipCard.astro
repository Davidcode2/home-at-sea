---
import type { Ship } from "../lib/strapi";
import { formatStatus } from "../lib/strapi";

interface Props {
  ship: Ship;
}

const { ship } = Astro.props;

const statusColors: Record<string, string> = {
  operational: "bg-green-500/20 text-green-400 border-green-500/30",
  "under-construction": "bg-amber-500/20 text-amber-400 border-amber-500/30",
  planned: "bg-blue-500/20 text-blue-400 border-blue-500/30",
};
---

<a
  href={`/ships/${ship.slug}`}
  class="group block rounded-2xl overflow-hidden bg-theme-card border border-theme hover:border-gold/50 transition-all duration-300 hover:shadow-xl hover:shadow-gold/5 hover:-translate-y-1"
>
  <div class="relative h-64 sm:h-72 overflow-hidden bg-ocean-dark">
    <div class="absolute inset-0 bg-gradient-to-b from-navy/20 via-transparent to-navy/80 z-10"></div>
    <div class="absolute inset-0 bg-ocean-dark flex items-center justify-center">
      <svg class="w-24 h-24 text-ocean-light/30" viewBox="0 0 32 32" fill="none" stroke="currentColor" stroke-width="1">
        <path d="M4 22 C4 22 8 14 16 14 C24 14 28 22 28 22" />
        <path d="M2 22 L30 22" />
        <path d="M16 14 L16 6" />
        <path d="M16 6 L22 10" />
        <path d="M16 8 L20 11" />
      </svg>
    </div>
    <div class="absolute bottom-0 left-0 right-0 p-6 z-20">
      <span class={`inline-block px-2 py-1 text-xs font-medium rounded-full border mb-3 ${statusColors[ship.status]}`}>
        {formatStatus(ship.status)}
      </span>
      <h3 class="font-heading text-2xl font-bold text-white mb-1 group-hover:text-gold-light transition-colors">
        {ship.name}
      </h3>
      <p class="text-white/80 text-sm line-clamp-2">{ship.tagline}</p>
    </div>
  </div>
  <div class="p-5">
    <div class="grid grid-cols-3 gap-4 text-center">
      <div>
        <p class="text-xs text-theme-muted uppercase tracking-wide">Length</p>
        <p class="font-heading font-bold text-accent-primary text-lg">{ship.length}m</p>
      </div>
      <div>
        <p class="text-xs text-theme-muted uppercase tracking-wide">Residences</p>
        <p class="font-heading font-bold text-accent-primary text-lg">{ship.residenceCount}</p>
      </div>
      <div>
        <p class="text-xs text-theme-muted uppercase tracking-wide">Year</p>
        <p class="font-heading font-bold text-accent-primary text-lg">{ship.yearBuilt}</p>
      </div>
    </div>
  </div>
</a>
